<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Uploads Directory - Webserv</title>
    <link rel="stylesheet" href="/assets/theme.css">
</head>
<body>
    <main class="card card--medium">
        <div class="card-content">
            <div class="pill">Multipart uploads</div>
            <h1 class="hero-title"><span>ğŸ“</span> Uploads Directory</h1>
            <p class="subtitle">POST files directly to <code>/uploads/</code>. This location is tuned for larger payloads and demonstrates the upload_store directive.</p>

            <div class="grid">
                <section>
                    <h2>Try it now</h2>
                    <form id="uploadForm" action="/uploads/" method="post" enctype="multipart/form-data">
                        <input type="file" name="file" required>
                        <button type="submit" class="btn">Upload file</button>
                    </form>
                    <pre id="uploadResult">Select a file and submit to see the raw server response.</pre>
                </section>

                <section>
                    <h2>Location details</h2>
                    <ul>
                        <li>ğŸ“‚ <strong>Filesystem target:</strong> ./www/html/uploads/</li>
                        <li>ğŸ“ <strong>Body size limit:</strong> 100&nbsp;MB</li>
                        <li>ğŸ“ <strong>Allowed methods:</strong> GET, POST, DELETE</li>
                        <li>ğŸ§° <strong>Use cases:</strong> upload demonstrations, DELETE testing</li>
                    </ul>
                    <p class="muted">Need to inspect a file? Visit <a href="/uploads/" class="link-button">the uploads listing</a> if autoindex is enabled in your configuration.</p>
                </section>
            </div>

            <div class="actions">
                <a href="/" class="btn">â† Back to Home</a>
            </div>
        </div>
    </main>
    <script>
    const form = document.getElementById('uploadForm');
    const result = document.getElementById('uploadResult');

    form.addEventListener('submit', async (event) => {
        event.preventDefault();
        result.textContent = 'Uploading...';
        const data = new FormData(form);
        try {
            const response = await fetch(form.action, { method: 'POST', body: data });
            const text = await response.text();
            result.textContent = 'Status: ' + response.status + ' ' + (response.statusText || '') + '\\n' + text;
        } catch (error) {
            result.textContent = 'âŒ Upload failed: ' + error;
        }
    });
    </script>
</body>
</html>
